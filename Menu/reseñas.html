<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Reseñas – Pastelería 1000 Sabores</title>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <header class="py-3 border-bottom">
    <h1 style="font-family: 'Pacifico', cursive; color: #8B4513;">
      Reseñas de clientes
    </h1>
    <nav>
      <a href="../index.html" class="reseña-form button" style="max-width:200px;margin:auto;">Inicio</a>
    </nav>
  </header>

  <main class="container my-4">
    <h2 class="mb-4" style="font-family: 'Pacifico', cursive;">Reseñas de nuestros clientes</h2>
    <div class="alert alert-info">¡Comparte tu experiencia y lee lo que otros opinan!</div>

    <div class="reseñas-container">
      <h2>Opiniones recientes</h2>
      <div id="comentarios-lista">
        <!-- Aquí se mostrarán las reseñas dinámicamente -->
        <div class="reseña">
          <div class="reseña-usuario">Ana Pérez <span class="reseña-rating">★★★★★</span></div>
          <div class="reseña-fecha">5 de septiembre de 2025</div>
          <div class="reseña-texto">
            ¡La torta de chocolate es espectacular! Muy húmeda y con un sabor intenso. Repetiré sin duda.
          </div>
        </div>
        <div class="reseña">
          <div class="reseña-usuario">Carlos Soto <span class="reseña-rating">★★★★☆</span></div>
          <div class="reseña-fecha">3 de septiembre de 2025</div>
          <div class="reseña-texto">
            El cheesecake de frambuesa estaba delicioso, aunque me gustaría que tuviera más salsa.
          </div>
        </div>
        <div class="reseña">
          <div class="reseña-usuario">María López <span class="reseña-rating">★★★★★</span></div>
          <div class="reseña-fecha">1 de septiembre de 2025</div>
          <div class="reseña-texto">
            Excelente atención y productos frescos. Recomiendo la Selva Negra.
          </div>
        </div>
      </div>

      <!-- Formulario único para dejar reseña -->
      <form id="comentario-form" class="reseña-form" method="post" action="#">
        <label for="comentario-nombre">Tu nombre</label>
        <input type="text" id="comentario-nombre" name="usuario" required>

        <label for="comentario-rating">Calificación</label>
        <select id="comentario-rating" name="rating" required>
          <option value="">Selecciona</option>
          <option value="5">★★★★★</option>
          <option value="4">★★★★☆</option>
          <option value="3">★★★☆☆</option>
          <option value="2">★★☆☆☆</option>
          <option value="1">★☆☆☆☆</option>
        </select>

        <label for="comentario-texto">Comentario</label>
        <textarea id="comentario-texto" name="texto" rows="3" required></textarea>

        <button type="submit">Enviar reseña</button>
      </form>
    </div>
  </main>

  <footer class="border-top py-4 mt-5">
    <small>© 2025 Pastelería Mil Sabores</small>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script>
  // Mostrar y guardar reseñas con estrellas
  document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('comentario-form');
    const lista = document.getElementById('comentarios-lista');
    const estrellas = ["★☆☆☆☆","★★☆☆☆","★★★☆☆","★★★★☆","★★★★★"];

    function mostrarComentarios() {
      const comentarios = JSON.parse(localStorage.getItem('comentarios_generales') || '[]');
      let html = '';
      comentarios.forEach(c => {
        html += `<div class="reseña">
          <div class="reseña-usuario">${c.nombre} <span class="reseña-rating">${estrellas[c.rating-1]}</span></div>
          <div class="reseña-fecha">${c.fecha}</div>
          <div class="reseña-texto">${c.texto}</div>
        </div>`;
      });
      // Mantén las reseñas fijas originales
      html += lista.innerHTML;
      lista.innerHTML = html;
    }

    mostrarComentarios();

    form.onsubmit = function (e) {
      e.preventDefault();
      const nombre = document.getElementById('comentario-nombre').value.trim();
      const texto = document.getElementById('comentario-texto').value.trim();
      const rating = parseInt(document.getElementById('comentario-rating').value, 10);
      if (!nombre || !texto || !rating) return;
      const nuevo = {
        nombre,
        texto,
        rating,
        fecha: new Date().toLocaleDateString('es-CL', { day: 'numeric', month: 'long', year: 'numeric' })
      };
      const comentarios = JSON.parse(localStorage.getItem('comentarios_generales') || '[]');
      comentarios.unshift(nuevo);
      localStorage.setItem('comentarios_generales', JSON.stringify(comentarios));
      form.reset();
      mostrarComentarios();
    };
  });
  </script>
</body>
</html>