<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catálogo – Pastelería 1000 Sabores</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <header class="py-3 border-bottom">
    <div class="container d-flex flex-wrap justify-content-between align-items-center gap-3">
      <div class="d-flex align-items-center gap-3">
        <img src="../imagenes/Logo%20la%20ruta%20el%20pastelazo.png" alt="Logotipo Pastelería 1000 Sabores" width="56" height="56" loading="lazy"/>
        <h1 class="h4 m-0" style="font-family: 'Pacifico', cursive; color: #8B4513;">Catálogo</h1>
      </div>
      <nav aria-label="Navegación principal">
        <ul class="nav nav-pills">
          <li class="nav-item"><a class="nav-link" href="../index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link active" href="catalogo.html" aria-current="page">Catálogo</a></li>
          <li class="nav-item"><a class="nav-link" href="carrito.html">Carrito</a></li>
          <li class="nav-item"><a class="nav-link" href="checkout.html">Checkout</a></li>
          <li class="nav-item"><a class="nav-link" href="estado.html">Estado</a></li>
          <li class="nav-item"><a class="nav-link" href="reseñas.html">Reseñas</a></li>
          <li class="nav-item"><a class="nav-link" href="perfil.html">Perfil</a></li>
          <li class="nav-item"><a class="nav-link" href="Ingresar.html">Ingresar</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container my-4">
  <div id="alerta-feedback" style="position:fixed;top:1rem;right:1rem;z-index:1050;min-width:250px;"></div>
  <h2 class="mb-4" style="font-family: 'Pacifico', cursive;">Explora nuestras categorías</h2>
  <form class="row g-3 mb-4" id="filtro-catalogo">
    <div class="col-md-4">
      <select class="form-select" id="categoria-select" aria-label="Filtrar por categoría">
        <option value="">Todas las categorías</option>
        <option value="cuadrada">Tortas Cuadradas</option>
        <option value="circular">Tortas Circulares</option>
        <option value="individual">Postres Individuales</option>
        <option value="sinazucar">Productos Sin Azúcar</option>
        <option value="tradicional">Pastelería Tradicional</option>
        <option value="singluten">Productos Sin Gluten</option>
        <option value="vegana">Productos Vegana</option>
        <option value="especial">Tortas Especiales</option>
      </select>
    </div>
    <div class="col-md-8">
      <input type="search" class="form-control" id="busqueda-input" placeholder="Buscar producto, sabor, etc.">
    </div>
  </form>
  <div class="row row-cols-1 row-cols-md-3 g-4" id="catalogo-lista"></div>
  </main>

  <footer class="border-top py-4 mt-5">
    <div class="container d-flex flex-wrap gap-3 justify-content-between align-items-center">
      <ul class="nav">
        <li class="nav-item"><a class="nav-link px-2" href="fidelizacion.html">Programa</a></li>
        <li class="nav-item"><a class="nav-link px-2" href="estado.html">Estado de pedido</a></li>
        <li class="nav-item"><a class="nav-link px-2" href="reseñas.html">Reseñas</a></li>
      </ul>
      <small class="text-muted">© 2025 Pastelería 1000 Sabores</small>
  </div>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="../js/js.js" defer></script>
  <script>
    // Catálogo de productos (debe coincidir con js.js)
    const PRODUCTOS = [
      { id: "TC001", nombre: "Torta Cuadrada de Chocolate", imagen: "../imagenes/tortas/Torta Cuadrada de Chocolate.png", descripcion: "Deliciosa torta de chocolate con capas de ganache y un toque de avellanas.", precio: 45000, categoria: "cuadrada", masVendido: true },
      { id: "TC002", nombre: "Torta Cuadrada de Frutas", imagen: "../imagenes/tortas2/torta cuadrada de frutas.jpg", descripcion: "Bizcocho relleno con crema pastelera y frutas de temporada, cubierta con glasé natural.", precio: 50000, categoria: "cuadrada" },
      { id: "TT001", nombre: "Torta Circular de Vainilla", imagen: "../imagenes/tortas/Torta Circular de Vainilla.png", descripcion: "Bizcocho esponjoso de vainilla con relleno de crema pastelera y cobertura de glasé.", precio: 40000, categoria: "circular", nuevo: true },
      { id: "TT002", nombre: "Torta Circular de Manjar", imagen: "../imagenes/tortas/Torta_Circular _de _Manjar.png", descripcion: "Bizcocho de vainilla relleno de manjar y crema, cubierta de merengue flameado.", precio: 42000, categoria: "circular" },
      { id: "PI001", nombre: "Mousse de Chocolate", imagen: "../imagenes/tortas2/mousse de chocolate.jpg", descripcion: "Mousse cremoso de chocolate amargo con toques de café, servido en porción individual.", precio: 5000, categoria: "individual" },
      { id: "PI002", nombre: "Tiramisú Clásico", imagen: "../imagenes/tortas2/tiramisu clasico.jpg", descripcion: "Postre italiano elaborado con bizcochos empapados en café, crema de mascarpone y cacao espolvoreado.", precio: 5500, categoria: "individual", nuevo: true },
      { id: "PSA001", nombre: "Torta Sin Azúcar de Naranja", imagen: "../imagenes/tortas2/torta sin azucar de naranja.webp", descripcion: "Torta esponjosa con jugo de naranja natural, endulzada con stevia. Ideal para diabéticos.", precio: 48000, categoria: "sinazucar" },
      { id: "PSA002", nombre: "Cheesecake Sin Azúcar", imagen: "../imagenes/tortas2/cheesecake sin azucar.jpg", descripcion: "Cheesecake con base de galleta integral y endulzado sin azúcar. Suave y delicioso.", precio: 47000, categoria: "sinazucar" },
      { id: "PT001", nombre: "Empanada de Manzana", imagen: "../imagenes/tortas/Empanada_de_Manzana.png", descripcion: "Masa fina rellena de manzana caramelizada con un toque de canela.", precio: 3000, categoria: "tradicional" },
      { id: "PT002", nombre: "Tarta de Santiago", imagen: "../imagenes/tortas2/TARTA-DE-SANTIAGO.jpg", descripcion: "Clásica tarta gallega de almendra con azúcar glas y cruz de Santiago.", precio: 6000, categoria: "tradicional" },
      { id: "PG001", nombre: "Brownie Sin Gluten", imagen: "../imagenes/tortas2/brownie sin gluten.avif", descripcion: "Brownie de chocolate intenso elaborado con harina sin gluten.", precio: 4000, categoria: "singluten" },
      { id: "PG002", nombre: "Pan Sin Gluten", imagen: "../imagenes/tortas2/Pan-sin-gluten.jpg", descripcion: "Pan artesanal elaborado con mezcla de harinas sin gluten, suave y esponjoso.", precio: 3500, categoria: "singluten" },
      { id: "PV001", nombre: "Torta Vegana de Chocolate", imagen: "../imagenes/tortas2/torta-vegana-chocolate-arandanos.jpg", descripcion: "Bizcocho húmedo de cacao elaborado sin productos de origen animal.", precio: 50000, categoria: "vegana", masVendido: true },
      { id: "PV002", nombre: "Galletas Veganas de Avena", imagen: "../imagenes/tortas2/galletas veganas.jpg", descripcion: "Crujientes galletas veganas de avena y pasas, sin huevo ni lácteos.", precio: 4500, categoria: "vegana" },
      { id: "TE001", nombre: "Torta Especial de Cumpleaños", imagen: "../imagenes/tortas/Torta Especial de Cumpleaños.png", descripcion: "Torta de varias capas, rellena de crema, frutas y cubierta con fondant personalizado.", precio: 55000, categoria: "especial", nuevo: true },
      { id: "TE002", nombre: "Torta Especial de Boda", imagen: "../imagenes/tortas2/torta-especial-de-boda.jpg", descripcion: "Elegante torta de varios pisos decorada con flores de azúcar. Ideal para celebraciones de boda.", precio: 60000, categoria: "especial" },
      { id: "TL001", nombre: "Torta Tres Leches", imagen: "../imagenes/tortas/TRES-LECHES-1.webp", descripcion: "Bizcocho suave empapado en tres tipos de leche, cubierto con merengue y frutas.", precio: 22900, categoria: "tradicional", masVendido: true },
      { id: "TN001", nombre: "Torta Naranja", imagen: "../imagenes/tortas2/torta-naranja.jpg", descripcion: "Bizcocho esponjoso de naranja con relleno de crema y cobertura de glasé.", precio: 27990, categoria: "tradicional" },
      { id: "TP001", nombre: "Torta de Papaya", imagen: "../imagenes/tortas/Torta_de_Papaya.png", descripcion: "Bizcocho relleno de crema y papaya natural, decorado con frutas frescas.", precio: 24500, categoria: "tradicional" }
    ];
    function renderCatalogo(filtroCat = '', busqueda = '') {
      const lista = document.getElementById('catalogo-lista');
      if (!lista) return;
      let productos = PRODUCTOS;
      if (filtroCat) productos = productos.filter(p => p.categoria === filtroCat);
      if (busqueda) productos = productos.filter(p => p.nombre.toLowerCase().includes(busqueda.toLowerCase()) || p.descripcion.toLowerCase().includes(busqueda.toLowerCase()));
      if (productos.length === 0) {
        lista.innerHTML = '<div class="col"><div class="alert alert-warning">No se encontraron productos.</div></div>';
        return;
      }
      lista.innerHTML = productos.map(p => `
        <div class="col">
          <div class="card h-100 shadow-sm border-0 text-center position-relative">
            ${p.masVendido ? '<span class="badge bg-warning text-dark position-absolute top-0 start-0 m-2">Más vendido</span>' : ''}
            ${p.nuevo ? '<span class="badge bg-success position-absolute top-0 end-0 m-2">Nuevo</span>' : ''}
            <img src="${p.imagen}" class="card-img-top" alt="${p.nombre}" style="height:180px;object-fit:cover;">
            <div class="card-body d-flex flex-column justify-content-between">
              <h5 class="card-title">${p.nombre}</h5>
              <p class="card-text small">${p.descripcion}</p>
              <div class="fw-bold mb-2" style="color:#B26673;">${p.precio.toLocaleString('es-CL',{style:'currency',currency:'CLP'})}</div>
              <div class="d-flex gap-2 justify-content-center">
                <a href="detalle.html?id=${p.id}" class="btn btn-outline-primary btn-sm">Ver detalle</a>
                <a href="#" class="btn btn-primary btn-sm agregar-carrito" data-id="${p.id}">Agregar al carrito</a>
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }
    // Inicializar catálogo
    renderCatalogo();
    document.getElementById('categoria-select').addEventListener('change', function() {
      renderCatalogo(this.value, document.getElementById('busqueda-input').value);
    });
    document.getElementById('busqueda-input').addEventListener('input', function() {
      renderCatalogo(document.getElementById('categoria-select').value, this.value);
    });
    // Feedback visual animado
    function mostrarAlerta(mensaje, tipo = 'success', tiempo = 3000) {
      const alerta = document.getElementById('alerta-feedback');
      alerta.innerHTML = `<div class="alert alert-${tipo} fade show shadow" role="alert">${mensaje}</div>`;
      setTimeout(() => {
        alerta.innerHTML = '';
      }, tiempo);
    }
    document.addEventListener('producto-agregado', function(e) {
      mostrarAlerta('Producto agregado al carrito', 'success');
    });
  </script>
</body>
</html>