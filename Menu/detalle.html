<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Detalle de producto – Pastelería 1000 Sabores</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Pacifico&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/style.css">
</head>
<body>
  <header class="py-3 border-bottom">
    <div class="container d-flex flex-wrap justify-content-between align-items-center gap-3">
      <div class="d-flex align-items-center gap-3">
        <img src="../imagenes/Logo%20la%20ruta%20el%20pastelazo.png" alt="Logotipo Pastelería 1000 Sabores" width="56" height="56" loading="lazy"/>
        <h1 class="h4 m-0" style="font-family: 'Pacifico', cursive; color: #8B4513;">Detalle de producto</h1>
      </div>
      <nav aria-label="Navegación principal">
        <ul class="nav nav-pills">
          <li class="nav-item"><a class="nav-link" href="../index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link" href="catalogo.html">Catálogo</a></li>
          <li class="nav-item"><a class="nav-link" href="carrito.html">Carrito</a></li>
          <li class="nav-item"><a class="nav-link" href="checkout.html">Checkout</a></li>
          <li class="nav-item"><a class="nav-link" href="estado.html">Estado</a></li>
          <li class="nav-item"><a class="nav-link" href="reseñas.html">Reseñas</a></li>
          <li class="nav-item"><a class="nav-link" href="perfil.html">Perfil</a></li>
          <li class="nav-item"><a class="nav-link" href="Ingresar.html">Ingresar</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="container my-5">
    <div id="detalle-producto" class="row g-4 align-items-center">
      <!-- El contenido se carga dinámicamente con JS -->
    </div>
    <div id="detalle-error" class="alert alert-warning d-none mt-4">
      Producto no encontrado.
    </div>

    <section class="mt-5">
      <h3 class="h5 mb-3" style="font-family: 'Pacifico', cursive;">Comentarios de clientes</h3>
      <div class="mb-3">
        <form id="form-comentario">
          <textarea class="form-control mb-2" id="comentario" rows="2" placeholder="¿Cómo estuvo tu torta?"></textarea>
          <button type="submit" class="btn btn-outline-primary btn-sm">Agregar comentario</button>
        </form>
      </div>
      <ul id="lista-comentarios" class="list-group"></ul>
    </section>
  </main>

  <footer class="border-top py-4 mt-5">
    <div class="container d-flex flex-wrap gap-3 justify-content-between align-items-center">
      <ul class="nav">
        <li class="nav-item"><a class="nav-link px-2" href="fidelizacion.html">Programa</a></li>
        <li class="nav-item"><a class="nav-link px-2" href="estado.html">Estado de pedido</a></li>
        <li class="nav-item"><a class="nav-link px-2" href="reseñas.html">Reseñas</a></li>
      </ul>
      <small class="text-muted">© 2025 Pastelería 1000 Sabores</small>
    </div>
  </footer>

  <script>
    // Catálogo de productos (puedes ampliar según tu catálogo real)
    const productos = {
      "TC001": {
        nombre: "Torta Cuadrada de Chocolate",
        imagen: "../imagenes/tortas/Torta_Cuadrada_Chocolate.png",
        descripcion: "Deliciosa torta de chocolate con capas de ganache y un toque de avellanas. Personalizable con mensajes especiales.",
        precio: "$45.000"
      },
      "TC002": {
        nombre: "Torta Cuadrada de Frutas",
        imagen: "../imagenes/tortas/Torta_Cuadrada_Frutas.png",
        descripcion: "Una mezcla de frutas frescas y crema chantilly sobre un suave bizcocho de vainilla, ideal para celebraciones.",
        precio: "$50.000"
      },
      "TT001": {
        nombre: "Torta Circular de Vainilla",
        imagen: "../imagenes/tortas/Torta_Circular_Vainilla.png",
        descripcion: "Bizcocho de vainilla clásico relleno con crema pastelera y cubierto con un glaseado dulce, perfecto para cualquier ocasión.",
        precio: "$40.000"
      },
      "TT002": {
        nombre: "Torta Circular de Manjar",
        imagen: "../imagenes/tortas/Torta_Circular_Manjar.png",
        descripcion: "Torta tradicional chilena con manjar y nueces, un deleite para los amantes de los sabores dulces y clásicos.",
        precio: "$42.000"
      },
      "PI001": {
        nombre: "Mousse de Chocolate",
        imagen: "../imagenes/tortas/Mousse_Chocolate.png",
        descripcion: "Postre individual cremoso y suave, hecho con chocolate de alta calidad, ideal para los amantes del chocolate.",
        precio: "$5.000"
      },
      "PI002": {
        nombre: "Tiramisú Clásico",
        imagen: "../imagenes/tortas/Tiramisu.png",
        descripcion: "Un postre italiano individual con capas de café, mascarpone y cacao, perfecto para finalizar cualquier comida.",
        precio: "$5.500"
      },
      "PSA001": {
        nombre: "Torta Sin Azúcar de Naranja",
        imagen: "../imagenes/tortas/Torta_SA_Naranja.png",
        descripcion: "Torta ligera y deliciosa, endulzada naturalmente, ideal para quienes buscan opciones más saludables.",
        precio: "$48.000"
      },
      "PSA002": {
        nombre: "Cheesecake Sin Azúcar",
        imagen: "../imagenes/tortas/Cheesecake_Sin_Azucar.png",
        descripcion: "Suave y cremoso, este cheesecake es una opción perfecta para disfrutar sin culpa.",
        precio: "$47.000"
      },
      "PT001": {
        nombre: "Empanada de Manzana",
        imagen: "../imagenes/tortas/Empanada_Manzana.png",
        descripcion: "Pastelería tradicional rellena de manzanas especiadas, perfecta para un dulce desayuno o merienda.",
        precio: "$3.000"
      },
      "PT002": {
        nombre: "Tarta de Santiago",
        imagen: "../imagenes/tortas/Tarta_Santiago.png",
        descripcion: "Tradicional tarta española hecha con almendras, azúcar, y huevos, una delicia para los amantes de los postres clásicos.",
        precio: "$6.000"
      },
      "PG001": {
        nombre: "Brownie Sin Gluten",
        imagen: "../imagenes/tortas/Brownie_Sin_Gluten.png",
        descripcion: "Rico y denso, este brownie es perfecto para quienes necesitan evitar el gluten sin sacrificar el sabor.",
        precio: "$4.000"
      },
      "PG002": {
        nombre: "Pan Sin Gluten",
        imagen: "../imagenes/tortas/Pan_Sin_Gluten.png",
        descripcion: "Suave y esponjoso, ideal para sándwiches o para acompañar cualquier comida.",
        precio: "$3.500"
      },
      "PV001": {
        nombre: "Torta Vegana de Chocolate",
        imagen: "../imagenes/tortas/Torta_Vegana_Chocolate.png",
        descripcion: "Torta de chocolate húmeda y deliciosa, hecha sin productos de origen animal, perfecta para veganos.",
        precio: "$50.000"
      },
      "PV002": {
        nombre: "Galletas Veganas de Avena",
        imagen: "../imagenes/tortas/Galletas_Veganas.png",
        descripcion: "Crujientes y sabrosas, estas galletas son una excelente opción para un snack saludable y vegano.",
        precio: "$4.500"
      },
      "TE001": {
        nombre: "Torta Especial de Cumpleaños",
        imagen: "../imagenes/tortas/Torta_Cumple.png",
        descripcion: "Diseñada especialmente para celebraciones, personalizable con decoraciones y mensajes únicos.",
        precio: "$55.000"
      },
      "TE002": {
        nombre: "Torta Especial de Boda",
        imagen: "../imagenes/tortas/Torta_Boda.png",
        descripcion: "Elegante y deliciosa, esta torta está diseñada para ser el centro de tu celebración.",
        precio: "$60.000"
      },
      "TL001": {
        nombre: "Torta Tres Leches",
        imagen: "../imagenes/tortas/Torta_Tres_Leches.png",
        descripcion: "Bizcocho suave empapado en tres tipos de leche, cubierto con merengue y frutas.",
        precio: "$22.900"
      },
      "TN001": {
        nombre: "Torta Naranja",
        imagen: "../imagenes/tortas/Torta_Naranja.png",
        descripcion: "Bizcocho esponjoso de naranja con relleno de crema y cobertura de glasé.",
        precio: "$27.990"
      },
      "TP001": {
        nombre: "Torta de Papaya",
        imagen: "../imagenes/tortas/Torta_Papaya.png",
        descripcion: "Bizcocho relleno de crema y papaya natural, decorado con frutas frescas.",
        precio: "$24.500"
      }
    };

    // Obtener el parámetro id de la URL
    const params = new URLSearchParams(window.location.search);
    const id = params.get("id");
    const cont = document.getElementById('detalle-producto');
    const error = document.getElementById('detalle-error');

    if (id && productos[id]) {
      const prod = productos[id];
      cont.innerHTML = `
        <div class="col-md-5 text-center">
          <img src="${prod.imagen}" alt="${prod.nombre}" class="img-fluid rounded-4 shadow" style="max-width:340px;">
        </div>
        <div class="col-md-7">
          <h2 class="mb-3" style="font-family: 'Pacifico', cursive;">${prod.nombre}</h2>
          <p class="mb-3">${prod.descripcion}</p>
          <p class="fw-bold fs-4" style="color:#B26673;">${prod.precio}</p>
          <div class="d-flex gap-2 mb-3">
            <a href="carrito.html" class="btn btn-primary">Agregar al carrito</a>
            <a href="catalogo.html" class="btn btn-outline-primary">Volver al catálogo</a>
          </div>
        </div>
      `;
    } else {
      error.classList.remove('d-none');
    }

    // Comentarios por producto (localStorage)
    const idProd = new URLSearchParams(location.search).get('id');
    const lista = document.getElementById('lista-comentarios');
    const form = document.getElementById('form-comentario');
    function renderComentarios() {
      const comentarios = JSON.parse(localStorage.getItem('comentarios_' + idProd) || '[]');
      lista.innerHTML = comentarios.map(c => `<li class="list-group-item">${c}</li>`).join('');
    }
    form?.addEventListener('submit', e => {
      e.preventDefault();
      const txt = document.getElementById('comentario').value.trim();
      if (txt) {
        const comentarios = JSON.parse(localStorage.getItem('comentarios_' + idProd) || '[]');
        comentarios.push(txt);
        localStorage.setItem('comentarios_' + idProd, JSON.stringify(comentarios));
        document.getElementById('comentario').value = '';
        renderComentarios();
      }
    });
    renderComentarios();
  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
